/*
* app.js - NotCode 1.0.0 
* Eartluck <https://themeforest.net/user/eartluck>
*/let textarea=document.getElementById("textarea"),lineNumberBtn=document.getElementById("line-number-btn"),preview=document.getElementById("preview"),colorSwip=document.getElementById("color-swip"),themeSwip=document.getElementById("theme-swip"),modeSwip=document.getElementById("mode-swip"),fontSwip=document.getElementById("font-swip"),fontSizeSwip=document.getElementById("font-size-swip"),loader=document.querySelector(".loading"),openFile=document.getElementById("open-file"),editor=CodeMirror.fromTextArea(textarea,{lineNumbers:!0,mode:"php"}),lineNumbers=!0;editor.setOption("mode","php"),editor.setOption("theme","base16-dark"),editor.setOption("lineNumbers",lineNumbers),lineNumberBtn.addEventListener("click",e=>{lineNumbers=!lineNumbers,editor.setOption("lineNumbers",lineNumbers)}),colorSwip.addEventListener("input",e=>{preview.style.backgroundColor=e.target.value}),themeSwip.addEventListener("change",e=>{let t=document.getElementById("theme-css");t.parentNode.removeChild(t);let n=document.createElement("link");n.setAttribute("href","codemirror/theme/"+e.target.value+".css"),n.setAttribute("id","theme-css"),n.setAttribute("rel","stylesheet"),document.querySelector("head").appendChild(n),editor.setOption("theme",e.target.value)}),modeSwip.addEventListener("change",e=>{editor.setOption("mode",e.target.value)});const exportImage=e=>{preview.style.transform="scale("+e+")",loader.style.display="flex",html2canvas(preview).then(e=>{loader.style.display="none",preview.style.transform="scale(1)";let t=document.createElement("a");t.setAttribute("download","notcode.png"),t.setAttribute("href",e.toDataURL("image/png")),t.click()})};openFile.addEventListener("click",async()=>{[fileHandle]=await window.showOpenFilePicker();let e=await fileHandle.getFile(),t=await e.text();editor.getDoc().setValue(t)});